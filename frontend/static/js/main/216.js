"use strict";(self.webpackChunkbiz_app=self.webpackChunkbiz_app||[]).push([[216],{44216:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var n=a(67294),r=a(37703),l=a(45949),s=a(29130),c=a(8295),o=a(42905),i=a(73288),u=a(13835),m=a(76523),p=a(72714),d=a(79860);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,l=void 0;try{for(var s,c=e[Symbol.iterator]();!(n=(s=c.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function v(e){var t=e.changePage,a=e.sales_people,r=e.addSalesTarget,s=g((0,n.useState)(""),2),c=s[0],o=s[1],f=g((0,n.useState)([]),2),v=f[0],E=f[1],h=g((0,n.useState)([]),2),y=(h[0],h[1]),b=g((0,n.useState)(""),2),S=b[0],N=b[1],_=g((0,n.useState)(""),2),w=_[0],P=_[1],T=g((0,n.useState)(""),2),x=T[0],k=T[1],Z=g((0,n.useState)(""),2),j=Z[0],M=Z[1],A=g((0,n.useState)(null),2),C=A[0],O=A[1],R=g((0,n.useState)(null),2),B=R[0],U=R[1],I=g((0,n.useState)(null),2),D=I[0],q=I[1],L=g((0,n.useState)(""),2),K=L[0],$=L[1];(0,n.useEffect)((function(){y(a);var e=u.Z.filter((function(e){return"KES"===e.cc}))[0];O(e||u.Z[0])}),[a]);var z={anchorEl:B,popUpItems:u.Z};return n.createElement("div",{className:"row justify-content-between"},n.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 col-xs-12 p-2"},n.createElement("div",{className:"card"},n.createElement("div",{className:"card-header"},n.createElement("div",{className:"row justify-content-between ml-2 mr-2"},n.createElement("center",null,n.createElement("h3",null,"Add Sales Target")),n.createElement(i.Z,{prevPropsName:"Groups",propsName:"Add Group",changePage:t}))),n.createElement("div",{className:"card-content"},n.createElement(m.Z,{isError:D,responseMessage:K}),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Target Name*"),n.createElement("input",{type:"text",className:"form-control",placeholder:"Please enter target name",value:c,name:"target_name",onChange:function(e){return o(e.target.value)},required:!0,autoFocus:!0})),n.createElement("div",{className:"row justify-content-between"},n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group  mt-2"},n.createElement("label",null,"Select SalesMan*"),n.createElement(d.Z,{isMulti:!0,value:v,setValue:function(e){return E(e)},fetchData:l.d8,closeMenuOnSelect:!1})),n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group  mt-2"},n.createElement("label",null,"Select Target Period*"),n.createElement("select",{className:"form-control",value:j,onChange:function(e){return M(e.target.value)},required:!0},n.createElement("option",null,"..."),n.createElement("option",{value:"Daily"},"Daily"),n.createElement("option",{value:"Weekly"},"Weekly"),n.createElement("option",{value:"Monthly"},"Monthly"),n.createElement("option",{value:"Yearly"},"Yearly")))),n.createElement("div",{className:"row justify-content-between"},n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group"},n.createElement("label",{className:"control-label"},"Target Sales*"),n.createElement("div",{className:"form-group"},n.createElement("div",{className:"input-group mb-3"},n.createElement("div",{onClick:function(e){return U(e.currentTarget)},className:"input-group-prepend"},n.createElement("span",{className:"input-group-text btn_type"},u.Z&&C?n.createElement("div",null,C.cc):n.createElement("div",null,"KSH ."),n.createElement("i",{className:"ml-1 fas fa-chevron-down"}))),n.createElement("input",{type:"text",className:"form-control","aria-label":"Amount (to the nearest dollar)",placeholder:"Please input target sales",value:S,name:"sales",onChange:function(e){return N(e.target.value)},required:!0}),n.createElement("div",{className:"input-group-append"},n.createElement("span",{className:"input-group-text"},".00"))))),n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group"},n.createElement("label",{className:"control-label"},"Monetary Reward"),n.createElement("div",{className:"form-group"},n.createElement("div",{className:"input-group mb-3"},n.createElement("div",{onClick:function(e){return U(e.currentTarget)},className:"input-group-prepend"},n.createElement("span",{className:"input-group-text btn_type"},u.Z&&C?n.createElement("div",null,C.cc):n.createElement("div",null,"KSH ."),n.createElement("i",{className:"ml-1 fas fa-chevron-down"}))),n.createElement("input",{type:"text",className:"form-control","aria-label":"Amount (to the nearest dollar)",placeholder:"Please input target sales",value:w,name:"sales",onChange:function(e){return P(e.target.value)}}),n.createElement("div",{className:"input-group-append"},n.createElement("span",{className:"input-group-text"},".00")))))),n.createElement("div",{className:"form-group"},n.createElement("label",{className:"control-label"},"Percentage Reward"),n.createElement("div",{className:"form-group"},n.createElement("div",{className:"input-group mb-3"},n.createElement("div",{className:"input-group-prepend"},n.createElement("span",{className:"input-group-text"},"%")),n.createElement("input",{type:"text",className:"form-control","aria-label":"Amount (to the nearest dollar)",placeholder:"Please input target sales",value:x,name:"sales",onChange:function(e){return k(e.target.value)}})))),n.createElement("div",{className:"row justify-content-end"},n.createElement("div",{onClick:function(){return function(){if(q(null),$(""),c&&v.length>0&&j&&S){var e=v.map((function(e){return e.value.id}));r({name:c,sale_people:JSON.stringify(e),period:j,target_sales:S,reward_money:w,reward_per:x})}else q(!0),$("Please input all stared fields")}()},className:"btn btn-primary btn-lg mt-5 mr-5 mb-2"},"Add SalesGroup"))))),n.createElement(p.Z,{popUpValues:z,handlePopUpClick:function(e){var t=u.Z.filter((function(t){return t.cc===e}))[0];t&&O(t),U(null)},handlePopUp:function(e){return U(B?null:e.currentTarget)}}))}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,l=void 0;try{for(var s,c=e[Symbol.iterator]();!(n=(s=c.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function y(e){var t=e.target,a=e.updateSalesTarget,r=e.changePage,s=E((0,n.useState)(""),2),c=s[0],o=s[1],g=E((0,n.useState)([]),2),f=g[0],v=g[1],h=E((0,n.useState)([]),2),y=(h[0],h[1],E((0,n.useState)(""),2)),b=y[0],S=y[1],N=E((0,n.useState)(""),2),_=N[0],w=N[1],P=E((0,n.useState)(""),2),T=P[0],x=P[1],k=E((0,n.useState)(""),2),Z=k[0],j=k[1],M=E((0,n.useState)(null),2),A=M[0],C=M[1],O=E((0,n.useState)(null),2),R=O[0],B=O[1],U=E((0,n.useState)(null),2),I=U[0],D=U[1],q=E((0,n.useState)(""),2),L=q[0],K=q[1];(0,n.useEffect)((function(){if(t){o(t.name);var e=t.salesmen.map((function(e){return{value:e.id,label:e.last_name?"".concat(e.first_name," ").concat(e.last_name):e.first_name}}));v(e),j(t.period),S(t.target_sales),w(t.reward_money),x(t.reward_per)}var a=u.Z.filter((function(e){return"KES"===e.cc}))[0];C(a||u.Z[0])}),[t]);var $={anchorEl:R,popUpItems:u.Z};return n.createElement("div",{className:"row justify-content-between"},n.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 col-xs-12 p-2"},n.createElement("div",{className:"card"},n.createElement("div",{className:"card-header"},n.createElement("div",{className:"row justify-content-between ml-2 mr-2"},n.createElement("center",null,n.createElement("h3",null,"Edit Sales Target")),n.createElement(i.Z,{prevPropsName:"Groups",propsName:"Edit Group",changePage:r}))),n.createElement("div",{className:"card-content"},n.createElement(m.Z,{isError:I,responseMessage:L}),n.createElement("div",{className:"form-group"},n.createElement("label",null,"Target Name*"),n.createElement("input",{type:"text",className:"form-control",placeholder:"Please enter target name",value:c,name:"target_name",onChange:function(e){return o(e.target.value)},required:!0,autoFocus:!0})),n.createElement("div",{className:"row justify-content-between"},n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group  mt-2"},n.createElement("label",null,"Select SalesMan*"),n.createElement(d.Z,{isMulti:!0,value:f,setValue:function(e){return v(e)},fetchData:l.d8,closeMenuOnSelect:!1})),n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group  mt-2"},n.createElement("label",null,"Select Target Period*"),n.createElement("select",{className:"form-control",value:Z,onChange:function(e){return j(e.target.value)},required:!0},n.createElement("option",null,"..."),n.createElement("option",{value:"Daily"},"Daily"),n.createElement("option",{value:"Weekly"},"Weekly"),n.createElement("option",{value:"Monthly"},"Monthly"),n.createElement("option",{value:"Yearly"},"Yearly")))),n.createElement("div",{className:"row justify-content-between"},n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group"},n.createElement("label",{className:"control-label"},"Target Sales*"),n.createElement("div",{className:"form-group"},n.createElement("div",{className:"input-group mb-3"},n.createElement("div",{onClick:function(e){return B(e.currentTarget)},className:"input-group-prepend"},n.createElement("span",{className:"input-group-text btn_type"},u.Z&&A?n.createElement("div",null,A.cc):n.createElement("div",null,"KSH ."),n.createElement("i",{className:"ml-1 fas fa-chevron-down"}))),n.createElement("input",{type:"text",className:"form-control","aria-label":"Amount (to the nearest dollar)",placeholder:"Please input target sales",value:b,name:"sales",onChange:function(e){return S(e.target.value)},required:!0}),n.createElement("div",{className:"input-group-append"},n.createElement("span",{className:"input-group-text"},".00"))))),n.createElement("div",{className:"col-lg-6 col-md-12 col-sm-12 col-xs-12 form-group"},n.createElement("label",{className:"control-label"},"Monetary Reward"),n.createElement("div",{className:"form-group"},n.createElement("div",{className:"input-group mb-3"},n.createElement("div",{onClick:function(e){return B(e.currentTarget)},className:"input-group-prepend"},n.createElement("span",{className:"input-group-text btn_type"},u.Z&&A?n.createElement("div",null,A.cc):n.createElement("div",null,"KSH ."),n.createElement("i",{className:"ml-1 fas fa-chevron-down"}))),n.createElement("input",{type:"text",className:"form-control","aria-label":"Amount (to the nearest dollar)",placeholder:"Please input target sales",value:_,name:"sales",onChange:function(e){return w(e.target.value)}}),n.createElement("div",{className:"input-group-append"},n.createElement("span",{className:"input-group-text"},".00")))))),n.createElement("div",{className:"form-group"},n.createElement("label",{className:"control-label"},"Percentage Reward"),n.createElement("div",{className:"form-group"},n.createElement("div",{className:"input-group mb-3"},n.createElement("div",{className:"input-group-prepend"},n.createElement("span",{className:"input-group-text"},"%")),n.createElement("input",{type:"text",className:"form-control","aria-label":"Amount (to the nearest dollar)",placeholder:"Please input target sales",value:T,name:"sales",onChange:function(e){return x(e.target.value)}})))),n.createElement("div",{className:"row justify-content-end"},n.createElement("div",{onClick:function(){return function(){if(D(null),K(""),c&&f.length>0&&Z&&b){var e=f.map((function(e){return e.value.id}));a({name:c,sale_people:JSON.stringify(e),period:Z,target_sales:b,reward_money:_,reward_per:T,id:t.id}),handleModal()}else D(!1),K("Please input all stared fields")}()},className:"btn btn-primary btn-lg mt-5 mr-5 mb-2"},"Save SalesGroup"))))),n.createElement(p.Z,{popUpValues:$,handlePopUpClick:function(e){var t=u.Z.filter((function(t){return t.cc===e}))[0];t&&C(t),B(null)},handlePopUp:function(e){return B(R?null:e.currentTarget)}}))}a(91506);var b=a(32941),S=a(2376),N=a(68134),_=a(90482),w=a(17812),P=a(87748),T=a(66037),x=a(21539),k=a(41076),Z=a(22318);function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,l=void 0;try{for(var s,c=e[Symbol.iterator]();!(n=(s=c.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function A(e){var t=e.index,a=e.target,r=e.canManage,l=e.deleteSalesTarget,s=e.viewEditSalesTarget,c=j((0,n.useState)(null),2),o=c[0],i=c[1],u=j((0,n.useState)(!1),2),m=u[0],p=u[1],d={anchorEl:o,popUpItems:[{icon:n.createElement("i",{className:"fas fa-edit btn_type"}),name:"Edit",value:"Edit"},{icon:n.createElement("i",{className:"fas fa-trash btn_type"}),name:"Delete",value:"Delete"}]};return n.createElement(n.Fragment,null,n.createElement("tr",{key:t},n.createElement("td",null,t+1),n.createElement("td",null,a.name),n.createElement("td",null,a.period),n.createElement("td",null,a.target_sales_currency,". ",(0,N.Z)(a.target_sales)),n.createElement("td",null,n.createElement(w.Z,{"aria-label":"expand row",size:"small",onClick:function(){return p(!m)}},m?n.createElement("i",{className:"fas fa-sort-up bg_themed"}):n.createElement("i",{className:"fas fa-sort-down bg_themed"}))),n.createElement("td",null,r?n.createElement("i",{onClick:function(e){return i(e.currentTarget)},className:"fas fa-ellipsis-h btn_type"}):n.createElement("div",null))),n.createElement("tr",null,n.createElement("td",{style:{paddingBottom:0,paddingTop:0},colSpan:12},n.createElement(T.Z,{in:m,timeout:"auto",unmountOnExit:!0},n.createElement(P.Z,{margin:1},n.createElement(Z.Z,{variant:"h6",gutterBottom:!0,component:"div"},"Sales People"),n.createElement(x.Z,{size:"small","aria-label":"purchases"},n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"#"),n.createElement("th",null),n.createElement("th",null,"Name"),n.createElement("th",null,"Phone"),n.createElement("th",{align:"right"},"Email"))),n.createElement(k.Z,null,a.salesmen.map((function(e,t){return n.createElement("tr",{key:t},n.createElement("td",null,t+1),n.createElement("td",null,n.createElement("div",{className:"sale_target_img"},n.createElement("img",{src:e.pic?"..".concat(e.pic):"../static/images/login.jpg",alt:"offer logo"}))),n.createElement("td",null,e.first_name," ",e.last_name),n.createElement("td",null,e.phone),n.createElement("td",null,e.email))})))))))),n.createElement(_.Z,{popUpValues:d,handlePopUpClick:function(e){"Delete"==e?l(a.id):"Edit"==e&&s(a),i(null)},handlePopUp:function(e){return i(o?null:e.currentTarget)}}))}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,r=!1,l=void 0;try{for(var s,c=e[Symbol.iterator]();!(n=(s=c.next()).done)&&(a.push(s.value),!t||a.length!==t);n=!0);}catch(e){r=!0,l=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw l}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function R(e){var t=e.sales_target,a=e.changePage,r=e.canManage,l=e.deleteSalesTarget,s=e.viewEditSalesTarget,c=e.pageDetails,o=e.fetchSalesTarget,i=C((0,n.useState)(""),2),u=i[0],m=i[1],p=C((0,n.useState)(25),2),d=p[0],g=p[1];return n.createElement("div",{className:"row justify-content-between"},n.createElement("div",{className:"col-lg-12 col-md-12 col-sm-12 col-xs-12 p-2"},n.createElement("div",{className:"bg_themed container-fluid align-items-center"},n.createElement("div",{className:"row justify-content-between align-items-center"},n.createElement("div",{className:"col-lg-4 col-md-6 col-sm-6 form-group p-2"},n.createElement("div",{className:"input-group p-0 m-0"},n.createElement("input",{type:"text",className:"form-control border-right-0 m-0 p-0 ",value:u,onChange:function(e){return m(e.target.value)},onKeyUp:(0,b.Z)((function(){o(1,u||"",d)}),2e3),placeholder:"Search"}),n.createElement("span",{className:"input-group-text border-left-0"},n.createElement("i",{className:"ml-1 fas fa-search"})))),n.createElement("div",null,r?n.createElement("div",{onClick:function(){return a(2)},className:"btn btn-primary btn-lg table_menu_btn mr-3"},"Add Sales Target"):n.createElement("div",null))),n.createElement("div",{className:"row"},n.createElement("table",null,n.createElement("thead",null,n.createElement("tr",null,n.createElement("th",null,"#"),n.createElement("th",null,"Target Name"),n.createElement("th",null,"Period"),n.createElement("th",null,"Target Sales"),n.createElement("th",null,"Sales People"),n.createElement("th",null,"Actions"))),n.createElement("tbody",null,t.map((function(e,t){return n.createElement(A,{target:e,index:t,key:t,canManage:r,viewEditSalesTarget:s,deleteSalesTarget:l})})))),c.last_page&&c.last_page>1?n.createElement(S.Z,{rows:d,changeRows:function(e){o(1,u,e),g(e)},pageDetails:c,changePage:function(e){o(e,u,d)}}):n.createElement("div",null)))))}function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function U(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function I(e,t){return I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},I(e,t)}function D(e,t){return!t||"object"!==B(t)&&"function"!=typeof t?q(e):t}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}a(81402);var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(u,e);var t,a,r,l,i=(r=u,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(r);if(l){var a=L(this).constructor;e=Reflect.construct(t,arguments,a)}else e=t.apply(this,arguments);return D(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).state={openSnackBar:!1,isError:null,responseMessage:"",snackPosition:{vertical:"top",horizontal:"center"},currentSalesTarget:null,currentPage:1},t.closeSnackBar=t.closeSnackBar.bind(q(t)),t.setResponse=t.setResponse.bind(q(t)),t.changePage=t.changePage.bind(q(t)),t.viewEditSalesTarget=t.viewEditSalesTarget.bind(q(t)),t}return t=u,(a=[{key:"changePage",value:function(e){this.setState({currentPage:e})}},{key:"viewEditSalesTarget",value:function(e){this.setState({currentSalesTarget:e,currentPage:3})}},{key:"componentDidUpdate",value:function(e){var t=this.props,a=t.error,n=t.message;a!==e.error?this.setResponse(a):n!==e.message&&(201==n.status&&this.setState({currentPage:1}),this.setResponse(n))}},{key:"componentDidMount",value:function(){this.props.fetchSalesTarget(1)}},{key:"setResponse",value:function(e){var t=Object.keys(e.responseMessage)[0],a=e.responseMessage[t];a instanceof Array?this.setState({responseMessage:a[0],isError:e.isError,openSnackBar:!0}):this.setState({responseMessage:a,isError:e.isError,openSnackBar:!0})}},{key:"closeSnackBar",value:function(){this.setState({openSnackBar:!1})}},{key:"render",value:function(){var e=this.props,t=e.salesReducer,a=e.addSalesTarget,r=e.fetchSalesPeople,l=e.auth,i=e.updateSalesTarget,u=e.deleteSalesTarget,m=e.fetchSalesTarget,p=t.isLoading,d=t.sales_target,g=t.sales_people,f=t.target_current_page,E=t.target_last_page,h=this.state,b=h.openSnackBar,S=h.isError,N=h.responseMessage,_=h.snackPosition,w=h.currentPage,P=h.currentSalesTarget,T={isError:S,responseMessage:N,openSnackBar:b,snackPosition:_};if(!l.group.permission.can_view_salesmen||!l.account.dist_options.use_sales_target)return(0,s.Z)(this.props.auth.group.permission);var x={current_page:f,last_page:E};switch(w){case 1:return n.createElement("div",null,n.createElement(o.Z,{open:p}),n.createElement(R,{sales_target:d,changePage:this.changePage,sales_people:g,canManage:l.group.permission.can_manage_salesmen,viewEditSalesTarget:this.viewEditSalesTarget,deleteSalesTarget:u,pageDetails:x,fetchSalesTarget:m}),n.createElement(c.Z,{values:T,closeSnackBar:this.closeSnackBar}));case 2:return n.createElement("div",null,n.createElement(o.Z,{open:p}),n.createElement(v,{sales_target:d,addSalesTarget:a,canManage:l.group.permission.can_manage_salesmen,changePage:this.changePage}),n.createElement(c.Z,{values:T,closeSnackBar:this.closeSnackBar}));case 3:return n.createElement("div",null,n.createElement(o.Z,{open:p}),n.createElement(y,{target:P,updateSalesTarget:i,canManage:l.group.permission.can_manage_salesmen,changePage:this.changePage}),n.createElement(c.Z,{values:T,closeSnackBar:this.closeSnackBar}));default:return n.createElement("div",null,n.createElement(o.Z,{open:p}),n.createElement(R,{sales_target:d,addSalesTarget:a,fetchSalesPeople:r,sales_people:g,canManage:l.group.permission.can_manage_salesmen,updateSalesTarget:i,deleteSalesTarget:u}),n.createElement(c.Z,{values:T,closeSnackBar:this.closeSnackBar}))}}}])&&U(t.prototype,a),u}(n.Component);const $=(0,r.$j)((function(e){return{auth:e.authReducer,salesReducer:e.salesReducer,error:e.errorsReducer,message:e.messagesReducer}}),{fetchSalesTarget:l.ci,addSalesTarget:l.XR,fetchSalesPeople:l.rB,deleteSalesTarget:l.C$,updateSalesTarget:l.g})(K)},45949:(e,t,a)=>{a.d(t,{C$:()=>E,Wd:()=>p,XR:()=>f,_y:()=>m,ci:()=>g,d8:()=>u,g:()=>v,rB:()=>i,sr:()=>d});var n=a(9669),r=a.n(n),l=a(34464),s=a(44997),c=a(58343),o=a(66808),i=function(e,t,a){return function(n,s){n({type:o.bc});var i=(0,l.Z)(s),u="../retailer/api/saleman?page=".concat(e);t&&(u+="&query=".concat(t)),a&&(u+="&rows=".concat(a)),r().get(u,i).then((function(t){n({type:o.iN,payload:{sales_people:t.data.sales_people,currentPage:e,lastPage:t.data.last_page}})})).catch((function(e){var t={responseMessage:e.response.data,status:e.response.status};n((0,c.x)(t)),n({type:o.Li})}))}};function u(e,t,a){var n=a.page,l=localStorage.getItem("token"),s={headers:{Accept:"application/json","Content-Type":"application/json"}};l&&(s.headers.Authorization="Token ".concat(l));var c=e?"../retailer/api/saleman?page=".concat(n,"&query=").concat(e):"../retailer/api/saleman?page=".concat(n);return new Promise((function(e,t){r().get(c,s).then((function(t){var a=!1;t.data.last_page>n&&(a=!0);var r=t.data.sales_people.map((function(e){return{value:e,label:e.last_name?"".concat(e.first_name," ").concat(e.last_name):e.first_name}}));e({options:r,hasMore:a,additional:{page:n+1}})})).catch((function(e){t(e.response.data)}))}))}var m=function(e){return function(t,a){t({type:o.bc});var n=(0,s.Z)(a);r().post("../retailer/api/saleman/",e,n).then((function(e){t((0,c.i)(e.data,e.status)),t({type:o.es,payload:e.data}),t({type:o.SV,payload:e.data.view_complete})})).catch((function(e){var a={responseMessage:e.response.data,status:e.response.status};t((0,c.x)(a)),t({type:o.Li})}))}},p=function(e){return function(t,a){t({type:o.bc});var n=(0,s.Z)(a);r().put("../retailer/api/saleman/",e,n).then((function(e){t((0,c.i)(e.data,e.status)),t({type:o.mF,payload:e.data})})).catch((function(e){var a={responseMessage:e.response.data,status:e.response.status};t((0,c.x)(a)),t({type:o.Li})}))}},d=function(e){return function(t,a){t({type:o.bc});var n=(0,l.Z)(a);r().delete("../retailer/api/saleman?salesman_id=".concat(e),n).then((function(a){t((0,c.i)(a.data,a.status)),t({type:o.Iy,payload:e})})).catch((function(e){var a={responseMessage:e.response.data,status:e.response.status};t((0,c.x)(a)),t({type:o.Li})}))}},g=function(e,t,a){return function(n,s){n({type:o.bc});var i=(0,l.Z)(s),u="../retailer/api/sales_target?page=".concat(e);t&&(u+="&query=".concat(t)),a&&(u+="&rows=".concat(a)),r().get(u,i).then((function(t){console.log(t.data),n({type:o.Fl,payload:{sales_target:t.data.sales_target,currentPage:e,lastPage:t.data.last_page}})})).catch((function(e){var t={responseMessage:e.response.data,status:e.response.status};n((0,c.x)(t)),n({type:o.Li})}))}},f=function(e){return function(t,a){t({type:o.bc});var n=(0,l.Z)(a);r().post("../retailer/api/sales_target/",e,n).then((function(e){t((0,c.i)(e.data,e.status)),t({type:o.Od,payload:e.data})})).catch((function(e){var a={responseMessage:e.response.data,status:e.response.status};t((0,c.x)(a)),t({type:o.Li})}))}},v=function(e){return function(t,a){t({type:o.bc});var n=(0,l.Z)(a);r().put("../retailer/api/sales_target/",e,n).then((function(e){t((0,c.i)(e.data,e.status)),t({type:o.Qc,payload:e.data})})).catch((function(e){var a={responseMessage:e.response.data,status:e.response.status};t((0,c.x)(a)),t({type:o.Li})}))}},E=function(e){return function(t,a){t({type:o.bc});var n=(0,l.Z)(a);r().delete("../retailer/api/sales_target?salestarget_id=".concat(e),n).then((function(a){t((0,c.i)(a.data,a.status)),t({type:o.bd,payload:e})})).catch((function(e){var a={responseMessage:e.response.data,status:e.response.status};t((0,c.x)(a)),t({type:o.Li})}))}}},54376:(e,t,a)=>{a.d(t,{Z:()=>l});var n=a(23645),r=a.n(n)()((function(e){return e[1]}));r.push([e.id,".sales_round_img {\n    width: 70px;\n    height: 70px;\n    overflow: hidden;\n    border-radius: 5px;\n}\n\n.sales_round_img img {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n}\n\n.add_sales_img {\n    height: 250px;\n    width: 250px;\n    cursor: pointer;\n    margin-bottom: 5px;\n}\n\n.add_sales_img img {\n    height: 100%;\n    width: 100%;\n    object-fit: contain;\n}\n\n.sale_target_img {\n    height: 40px;\n    width: 40px;\n    overflow: hidden;\n    border-radius: 10px;\n}\n\n.sale_target_img img {\n    width: 100%;\n    height: 100%;\n    object-fit: contain;\n}",""]);const l=r},81402:(e,t,a)=>{var n=a(93379),r=a.n(n),l=a(54376);r()(l.Z,{insert:"head",singleton:!1}),l.Z.locals}}]);